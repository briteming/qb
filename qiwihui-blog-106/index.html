<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录 · QIWIHUI</title><meta name="description" content="用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录 - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><meta property="og:site_name" content="QIWIHUI"><meta property="og:url" content="https://qiwihui.com/qiwihui-blog-106/index.html"><meta property="og:title" content="用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录"><meta property="og:description" content="用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录"><meta property="og:type" content="article"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/search/" target="_self" class="nav-list-link">SEARCH</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/projects/" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录</h1><div class="post-info">Aug 13, 2022<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">#技术</a><span>7 min. read</span></div><div class="post-content"><h2><span id="ru-he-huo-qu-lu-jing-can-shu">如何获取路径参数</span></h2>
<p>添加根据 id 获取数据操作：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io::&#123;Error, ErrorKind&#125;;</span><br><span class="line"><span class="comment">// ...省略</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">get_todo</span></span>(client: &amp;Client, list_id: <span class="built_in">i32</span>) -&gt; <span class="built_in">Result</span>&lt;TodoList, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> statement = client</span><br><span class="line">        .prepare(<span class="string">"select * from todo_list where id = $1"</span>)</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .unwrap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> may_todo = client</span><br><span class="line">        .query_opt(&amp;statement, &amp;[&amp;list_id])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .expect(<span class="string">"Error getting todo lists"</span>)</span><br><span class="line">        .map(|row| TodoList::from_row_ref(&amp;row).unwrap());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> may_todo &#123;</span><br><span class="line">        <span class="literal">Some</span>(todo) =&gt; <span class="literal">Ok</span>(todo),</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="literal">Err</span>(Error::new(ErrorKind::NotFound, <span class="string">"Not found"</span>)),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设置请求参数，设置使用 <code>Info</code> 作为请求路径参数序列化结构体：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::db::&#123;get_todo, get_todos&#125;;</span><br><span class="line"><span class="keyword">use</span> serde::Deserialize;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...省略</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">struct</span> <span class="title">Info</span></span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> list_id: <span class="built_in">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">todo</span></span>(info: web::Path&lt;Info&gt;, db_pool: web::Data&lt;Pool&gt;) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="keyword">let</span> client: Client = db_pool</span><br><span class="line">        .get()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .expect(<span class="string">"Error connecting to the database"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> result = get_todo(&amp;client, info.list_id).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="literal">Ok</span>(todo) =&gt; HttpResponse::<span class="literal">Ok</span>().json(todo),</span><br><span class="line">        <span class="literal">Err</span>(_) =&gt; HttpResponse::InternalServerError().into(),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加路由：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> handlers::&#123;todo, todos&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...省略</span></span><br><span class="line">    HttpServer::new(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::new()</span><br><span class="line">            .data(pool.clone())</span><br><span class="line">            .service(hello)</span><br><span class="line">            .route(<span class="string">"/todos&#123;_:/?&#125;"</span>, web::get().to(todos))</span><br><span class="line">            .route(<span class="string">"/todos/&#123;list_id&#125;&#123;_:/?&#125;"</span>, web::get().to(todo))</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>运行并获取结果：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> curl 127.0.0.1:8000/todos/1</span><br><span class="line">&#123;"id":1,"title":"List 1"&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="zeng-jia-ri-zhi-ji-lu">增加日志记录</span></h2>
<p>为了方便查看操作过程，可以增加日志记录，使用 <code>env_logger</code> 方便从环境变量中设置日志记录级别，<code>log</code> 用于记录不同级别日志，比如 <code>info</code>，<code>debug</code>。</p>
<p><code>Cargo.toml</code>：</p>
<figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="attr">env_logger</span> = <span class="string">"0.8"</span></span><br><span class="line"><span class="attr">log</span>=<span class="string">"0.4"</span></span><br></pre></td></tr></table></figure>
<p>在 <code>.env</code> 中可以手动设置日志记录级别，比如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RUST_LOG=info</span><br></pre></td></tr></table></figure>
<p><code>main.rs</code>：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> actix_web::&#123;get, middleware, web, App, HttpServer, Responder&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> env_logger;</span><br><span class="line"><span class="keyword">use</span> log::info;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() -&gt; io::<span class="built_in">Result</span>&lt;()&gt; &#123;</span><br><span class="line">     dotenv().ok();</span><br><span class="line">+    <span class="keyword">if</span> std::env::var(<span class="string">"RUST_LOG"</span>).is_err() &#123;</span><br><span class="line">+        std::env::set_var(<span class="string">"RUST_LOG"</span>, <span class="string">"actix_web=info"</span>);</span><br><span class="line">+    &#125;</span><br><span class="line">+    env_logger::init();</span><br><span class="line">     <span class="keyword">let</span> cfg = crate::config::Config::from_env().unwrap();</span><br><span class="line">     <span class="keyword">let</span> pool = cfg.pg.create_pool(NoTls).unwrap();</span><br><span class="line">+    info!(</span><br><span class="line">         <span class="string">"Starting server at http://&#123;&#125;:&#123;&#125;"</span>,</span><br><span class="line">         cfg.server.host, cfg.server.port</span><br><span class="line">     );</span><br><span class="line">     HttpServer::new(<span class="keyword">move</span> || &#123;</span><br><span class="line">         App::new()</span><br><span class="line">             .data(pool.clone())</span><br><span class="line">+            .wrap(middleware::Logger::default())</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>运行以查看日志</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> cargo run</span><br><span class="line">   Compiling todo-list v0.1.0 (/Users/qiwihui/rust/todo-list)</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) in 1m 19s</span><br><span class="line">     Running `target/debug/todo-list`</span><br><span class="line">[2020-10-23T06:43:18Z INFO  todo_list] Starting server at http://127.0.0.1:8000</span><br><span class="line">[2020-10-23T06:43:18Z INFO  actix_server::builder] Starting 4 workers</span><br><span class="line">[2020-10-23T06:43:18Z INFO  actix_server::builder] Starting "actix-web-service-127.0.0.1:8000" service on 127.0.0.1:8000</span><br><span class="line">[2020-10-23T06:45:04Z INFO  actix_web::middleware::logger] 127.0.0.1:63751 "GET /todos HTTP/1.1" 200 79 "" "curl/7.64.1" 0.016465</span><br></pre></td></tr></table></figure>
<h2><span id="ru-he-huo-qu-qing-qiu-ti">如何获取请求体</span></h2>
<p>首先，我们增加插入数据操作，sql 语句中的 <code>returning id, title</code> 用于返回插入成功的数据</p>
<p><code>db.rs</code>：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">create_todo</span></span>(client: &amp;Client, title: <span class="built_in">String</span>) -&gt; <span class="built_in">Result</span>&lt;TodoList, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> statement = client</span><br><span class="line">        .prepare(<span class="string">"insert into todo_list (title) values ($1) returning id, title"</span>)</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .unwrap();</span><br><span class="line"></span><br><span class="line">    client</span><br><span class="line">        .query(&amp;statement, &amp;[&amp;title])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .expect(<span class="string">"Error creating todo list"</span>)</span><br><span class="line">        .iter()</span><br><span class="line">        .map(|row| TodoList::from_row_ref(row).unwrap())</span><br><span class="line">        .collect::&lt;<span class="built_in">Vec</span>&lt;TodoList&gt;&gt;()</span><br><span class="line">        .pop()</span><br><span class="line">        .ok_or(Error::new(ErrorKind::Other, <span class="string">"Error creating todo list"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>增加请求处理，<code>CreateTodoList</code> 用于序列化请求的数据：</p>
<p><code>handles.rs</code></p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">struct</span> <span class="title">CreateTodoList</span></span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="built_in">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">create_todo</span></span>(</span><br><span class="line">    info: web::Json&lt;CreateTodoList&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="keyword">let</span> client: Client = state</span><br><span class="line">        .pool</span><br><span class="line">        .get()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .expect(<span class="string">"Error connecting to the database"</span>);</span><br><span class="line">    <span class="keyword">let</span> result = db::create_todo(&amp;client, info.<span class="number">0</span>.title.clone()).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="literal">Ok</span>(todo) =&gt; HttpResponse::<span class="literal">Ok</span>().json(todo),</span><br><span class="line">        <span class="literal">Err</span>(_) =&gt; HttpResponse::InternalServerError().into(),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，<code>state: web::Data&lt;AppState&gt;</code> 将 原来的 pool 做了简单的封装，好处在于可以传入多个数据作为 <code>web::Data</code>。</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .. 省略</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">struct</span> <span class="title">AppState</span></span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> pool: Pool,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_web::main]</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() -&gt; io::<span class="built_in">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// .. 省略</span></span><br><span class="line">    HttpServer::new(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::new()</span><br><span class="line">            .data(AppState &#123; pool: pool.clone() &#125;)</span><br></pre></td></tr></table></figure>
<p>同时添加路由：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">App::new()</span><br><span class="line">  <span class="comment">// 省略</span></span><br><span class="line">  .route(<span class="string">"/todos&#123;_:/?&#125;"</span>, web::post().to(handlers::create_todo))</span><br></pre></td></tr></table></figure>
<p>完成后运行 <code>cargo run</code>，在使用 curl 进行请求时，注意添加 <code>-H &quot;Content-Type: application/json&quot;</code> 头部信息，否则无法处理。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> curl -X POST 127.0.0.1:8000/todos -d '&#123;"title": "list 3"&#125;' -H "Content-Type: application/json"</span><br><span class="line">&#123;"id":3,"title":"list 3"&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="qi-ta-cao-zuo">其他操作</span></h2>
<p>继续添加其他操作，如获取创建单个项，以及完成项目（<code>check_todo</code>）</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">get_items</span></span>(client: &amp;Client, list_id: <span class="built_in">i32</span>) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">Vec</span>&lt;TodoItem&gt;, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">get_item</span></span>(client: &amp;Client, list_id: <span class="built_in">i32</span>, item_id: <span class="built_in">i32</span>) -&gt; <span class="built_in">Result</span>&lt;TodoItem, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">create_item</span></span>(client: &amp;Client, list_id: <span class="built_in">i32</span>, title: <span class="built_in">String</span>) -&gt; <span class="built_in">Result</span>&lt;TodoItem, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">check_todo</span></span>(client: &amp;Client, list_id: <span class="built_in">i32</span>, item_id: <span class="built_in">i32</span>) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">bool</span>, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以及对应的路由和请求处理：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">.route(<span class="string">"/todos/&#123;list_id&#125;/items&#123;_:/?&#125;"</span>, web::get().to(handlers::items))</span><br><span class="line">.route(<span class="string">"/todos/&#123;list_id&#125;/items&#123;_:/?&#125;"</span>, web::post().to(handlers::create_item))</span><br><span class="line">.route(<span class="string">"/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;"</span>, web::get().to(handlers::get_item))</span><br><span class="line">.route(<span class="string">"/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;"</span>, web::put().to(handlers::check_todo))</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">items</span></span>(info: web::Path&lt;GetTodoList&gt;, state: web::Data&lt;AppState&gt;) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">create_item</span></span>(</span><br><span class="line">    todo: web::Path&lt;GetTodoList&gt;,</span><br><span class="line">    info: web::Json&lt;CreateTodoItem&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">get_item</span></span>(info: web::Path&lt;GetTodoItem&gt;, state: web::Data&lt;AppState&gt;) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">check_todo</span></span>(</span><br><span class="line">    info: web::Path&lt;GetTodoItem&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) -&gt; <span class="keyword">impl</span> Responder &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="xiao-jie">小结</span></h2>
<ol>
<li>获取路径参数</li>
<li>获取请求体</li>
<li>设置日志记录</li>
</ol>
<h2><span id="can-kao-wen-dang-he-xiang-mu">参考文档和项目</span></h2>
<ol>
<li><a href="https://www.youtube.com/watch?v=gQwA0g0NNSI" target="_blank" rel="noopener">Creating a simple TODO service with Actix</a></li>
<li><a href="actix.rs">actix-web 官方文档</a></li>
<li><a href="https://github.com/actix/examples" target="_blank" rel="noopener">官方 actix-web 示例</a></li>
</ol>
<blockquote>
<p>GitHub repo: <a href="https://github.com/qiwihui/blog" target="_blank" rel="noopener">qiwihui/blog</a></p>
<p>Follow me: <a href="https://github.com/qiwihui" target="_blank" rel="noopener">@qiwihui</a></p>
<p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p>
</blockquote>
<h3><span id="comments">Comments</span></h3>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/%E6%8A%80%E6%9C%AF/">#技术</a><a href="/tags/Rust/">#Rust</a></p></article></div><div class="post-copyright"><blockquote><p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">署名-相同方式共享 | CC BY-SA 4.0 </a>许可协议。</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-71/" class="prev">PREV</a><a href="/qiwihui-blog-86/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-106/';
var disqus_title = '用 Rust Actix-web 写一个 Todo 应用（二）── 请求获取和日志记录';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-106/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>